{#
  Category Remove Modal Component (HTMX-enabled)

  Replaces browser alert (hx-confirm) with styled modal (BR-FIX-003)

  Usage:
    {% set modal_id = "remove-category-" ~ item.category.id %}
    {% set category = item.category %}
    {% set performer_count = item.performer_count %}
    {% set tournament_id = tournament.id %}
    {% include "components/category_remove_modal.html" %}

  CSS: Uses classes from components/_modals.scss
#}

<dialog id="{{ modal_id }}" class="modal modal-danger" aria-labelledby="{{ modal_id }}-title">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="{{ modal_id }}-title" class="modal-title">Remove Category</h3>
      <button type="button" class="modal-close" aria-label="Close"
              onclick="document.getElementById('{{ modal_id }}').close()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <div class="modal-body">
      <p>Are you sure you want to remove <strong>{{ category.name }}</strong>?</p>
      {% if performer_count > 0 %}
      <div class="modal-warning" role="alert">
        <strong>Warning:</strong> This will also remove {{ performer_count }} registered performer{{ 's' if performer_count != 1 else '' }}.
      </div>
      {% endif %}
      <p class="text-muted text-sm">This action cannot be undone.</p>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-secondary"
              onclick="document.getElementById('{{ modal_id }}').close()">
        Cancel
      </button>
      <button type="button" class="btn btn-danger"
              hx-delete="/tournaments/{{ tournament_id }}/categories/{{ category.id }}"
              hx-target="#category-row-{{ category.id }}"
              hx-swap="delete"
              onclick="document.getElementById('{{ modal_id }}').close()">
        Remove
      </button>
    </div>
  </div>
</dialog>

<script>
  document.getElementById('{{ modal_id }}').addEventListener('keydown', function(e) {
    if (e.key === 'Escape') this.close();
  });
</script>
