{% extends "base.html" %}

{% block title %}Encode Preselection Battle - Battle-D{% endblock %}

{% block header_title %}Encode Preselection Battle{% endblock %}

{% block content %}
<!-- Breadcrumb Navigation -->
<nav class="battle-breadcrumb" aria-label="Breadcrumb">
    <a href="/overview" class="breadcrumb-link">Overview</a>
    <span class="breadcrumb-separator" aria-hidden="true">/</span>
    <a href="/battles/{{ battle.id }}" class="breadcrumb-link">Battle Details</a>
    <span class="breadcrumb-separator" aria-hidden="true">/</span>
    <span class="breadcrumb-current" aria-current="page">Encode</span>
</nav>

<article class="battle-card">
    <header>
        <h2>Encode Preselection Scores</h2>
        <p>Enter scores (0-10) for each performer in this preselection battle.</p>
    </header>

    <form action="/battles/{{ battle.id }}/encode" method="post" class="encoding-form">
        <section>
            <h3>Performers</h3>
            {% for performer in battle.performers %}
            <div class="encoding-form-group">
                <label for="score_{{ performer.id }}" class="encoding-form-label">
                    ðŸŽ­ {{ performer.dancer.dancer_name }}
                </label>
                <input
                    type="number"
                    id="score_{{ performer.id }}"
                    name="score_{{ performer.id }}"
                    class="encoding-form-input"
                    min="0"
                    max="10"
                    step="0.1"
                    required
                    placeholder="Score (0-10)"
                    aria-describedby="score_help_{{ performer.id }}"
                    {% if performer.preselection_score %}value="{{ performer.preselection_score }}"{% endif %}
                >
                <span class="encoding-form-help" id="score_help_{{ performer.id }}">
                    Enter a score from 0 to 10 (decimals allowed)
                </span>
            </div>
            {% endfor %}
        </section>

        <div class="battle-actions">
            <button type="submit" class="battle-action-btn battle-action-primary">Submit Scores</button>
            <a href="/battles/{{ battle.id }}" class="battle-action-btn battle-action-secondary">Cancel</a>
        </div>
    </form>
</article>
{% endblock %}
