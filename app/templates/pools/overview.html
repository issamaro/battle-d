{#
  FUTURE FEATURE: Pool Standings View

  This template is prepared for the pool standings feature (V2).
  It is not currently wired to any route.

  Planned route: GET /pools/{pool_id}
  Purpose: Display pool standings during POOLS phase

  See: ROADMAP.md Phase 4+ for implementation schedule
  Added: 2025-12-17 during Phase 3.10 UX Consistency Audit
#}
{% extends "base.html" %}

{% block title %}Pool Standings{% if pool %} - {{ pool.name }}{% endif %} - Battle-D{% endblock %}

{% block header_title %}Pool Standings{% if pool %} - {{ pool.name }}{% endif %}{% endblock %}

{% block content %}
<section>
    <p><a href="/tournaments">‚Üê Back to Tournaments</a></p>
</section>

{% if pool %}
<article class="battle-card">
    <header>
        <h2>{{ pool.name }}</h2>
        <p>{{ pool.performer_count }} performers</p>
        {% if pool.winner_id %}
        <p class="status-success"><strong>‚úÖ Pool Complete - Winner Determined</strong></p>
        {% endif %}
    </header>

    <section class="battle-section">
        <h3>Standings</h3>
        {% if pool.performers %}
        <div class="table-wrapper">
            <table class="table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Performer</th>
                        <th>Wins</th>
                        <th>Draws</th>
                        <th>Losses</th>
                        <th>Points</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for performer in pool.performers|sort(attribute='pool_points', reverse=True) %}
                    <tr {% if pool.winner_id and performer.id == pool.winner_id %}class="standings-winner"{% endif %}>
                        <td>{{ loop.index }}</td>
                        <td>
                            üé≠ Performer {{ loop.index }}
                            {% if pool.winner_id and performer.id == pool.winner_id %}üèÜ{% endif %}
                        </td>
                        <td>{{ performer.pool_wins or 0 }}</td>
                        <td>{{ performer.pool_draws or 0 }}</td>
                        <td>{{ performer.pool_losses or 0 }}</td>
                        <td><strong>{{ performer.pool_points }}</strong></td>
                        <td>
                            {% if pool.winner_id and performer.id == pool.winner_id %}
                            <span class="status-success">‚úÖ Winner</span>
                            {% elif loop.index <= 2 %}
                            <span class="status-success">‚úÖ Advances</span>
                            {% else %}
                            <span class="status-danger">‚ùå Eliminated</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p>No performers in this pool yet.</p>
        {% endif %}
    </section>

    <section class="battle-section">
        <h3>Advancement</h3>
        <p>Top performers advance to the next phase based on pool points.</p>
        <p><strong>Points Formula:</strong> 3 points for win, 1 point for draw, 0 points for loss</p>
    </section>

    <footer class="battle-actions">
        {# NOTE: Pool battles are now viewed through Event Mode #}
        <a href="/tournaments" role="button" class="btn btn-secondary">
            Back to Tournaments
        </a>
    </footer>
</article>
{% else %}
<p>Pool not found.</p>
{% endif %}
{% endblock %}
