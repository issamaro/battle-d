# Feature Specification: Tournament Organization Validation

**Date:** 2025-12-04
**Status:** Business Analysis Complete - Ready for Implementation

---

## Table of Contents

1. [Problem Statement](#1-problem-statement)
2. [Executive Summary](#2-executive-summary)
3. [Tournament Flow Diagram](#3-tournament-flow-diagram)
4. [Business Rules & Acceptance Criteria](#4-business-rules--acceptance-criteria)
5. [Current State Analysis](#5-current-state-analysis)
6. [Implementation Recommendations](#6-implementation-recommendations)
7. [Appendix: Reference Material](#7-appendix-reference-material)

---

## 1. Problem Statement

Validate that the current tournament organization implementation is robust, complete, and production-ready. Special focus on edge cases: **ties at qualification boundaries** and **odd number of performers** in preselection battles.

---

## 2. Executive Summary

### Scope
This analysis validates the current implementation against documented business requirements (DOMAIN_MODEL.md, VALIDATION_RULES.md) covering: tournament lifecycle, category configuration, performer registration, battle generation, pool creation, tiebreak handling, and finals.

### What Works âœ…

| Feature | Status |
|---------|--------|
| Odd performers â†’ 3-way battle | Production Ready |
| 3-way battle encoding (3 scores) | Production Ready |
| Cross-category phase validation | Production Ready |
| Sequential battles (1 active at a time) | Production Ready |
| Tiebreak detection (finds ALL tied performers) | âœ… Code Correct |
| Tiebreak voting (KEEP/ELIMINATE modes) | Production Ready |
| All 4 phase transitions validated | Production Ready |

### What's Broken ğŸš¨

| Issue | Type | Location |
|-------|------|----------|
| 25% elimination rule | BUG | `tournament_calculations.py:88` |
| Uneven pool sizes [4,3] | BUG | `tournament_calculations.py:100-149` |
| Battle schedule not interleaved | GAP | `battle_service.py:282` |
| Preselection tiebreak not auto-created | GAP | Integration missing |
| Pool winner tiebreak not auto-created | GAP | Integration missing |

### Key Business Rules Defined

- **BR-POOL-001:** All pools must have equal sizes
- **BR-TIE-001:** Preselection tiebreaks auto-created when last battle is scored
- **BR-TIE-002:** Pool winner tiebreaks auto-created when last pool battle is scored
- **BR-TIE-003:** Boundary Score Fairness - ALL performers with the boundary score must compete in tiebreak (not just those "below the line")
- **BR-TIE-004:** Tiebreak format uses KEEP (N=2) or ELIMINATE (N>2) voting
- **BR-SCHED-001:** Battle queue interleaved across categories
- **BR-SCHED-002:** Only battles 2+ positions after ACTIVE can be reordered (COMPLETED, ACTIVE, and "on deck" are locked)

---

## 3. Tournament Flow Diagram (2 Pools, Worst-Case Scenario)

This diagram shows a complete tournament flow with **all corner cases** triggered.

### ğŸš¨ IMPLEMENTATION ISSUES DISCOVERED

Before the flow diagram, here are **critical bugs found** during analysis:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸš¨ BUG #1: 25% ELIMINATION RULE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Location: app/utils/tournament_calculations.py:88                          â”‚
â”‚  Code:     elimination_target = max(1, int(registered_performers * 0.25))   â”‚
â”‚                                                                             â”‚
â”‚  PROBLEM: This 25% rule was NEVER specified by the user!                    â”‚
â”‚                                                                             â”‚
â”‚  EXPECTED BEHAVIOR:                                                         â”‚
â”‚  - Pool capacity = groups_ideal Ã— performers_ideal (e.g., 2Ã—4 = 8)          â”‚
â”‚  - If registered < ideal, reduce performers_ideal to have EQUAL pools       â”‚
â”‚  - Example: 7 registered, want 2Ã—4=8 â†’ reduce to 2Ã—3=6, eliminate 1         â”‚
â”‚                                                                             â”‚
â”‚  CURRENT (WRONG) BEHAVIOR:                                                  â”‚
â”‚  - 9 registered â†’ eliminate 25% (2) â†’ 7 advance â†’ UNEVEN pools (4+3)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸš¨ BUG #2: UNEVEN POOL SIZES ALLOWED                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Location: app/utils/tournament_calculations.py:100-149                     â”‚
â”‚  Code:     distribute_performers_to_pools() allows [5, 4] distribution      â”‚
â”‚                                                                             â”‚
â”‚  PROBLEM: Pools should ALWAYS have equal performers!                        â”‚
â”‚                                                                             â”‚
â”‚  EXPECTED: Pool capacity = G Ã— P where P is same for all pools              â”‚
â”‚  CURRENT:  distribute_performers_to_pools(9, 2) â†’ [5, 4] (WRONG!)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸš¨ BUG #3: BATTLE SCHEDULE NOT MIXED                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Location: app/services/battle_service.py:282                               â”‚
â”‚  Code:     return pending_battles[0]  # FIFO by creation order              â”‚
â”‚                                                                             â”‚
â”‚  PROBLEM: Battles are NOT interleaved across categories!                    â”‚
â”‚                                                                             â”‚
â”‚  EXPECTED: Cat1-Battle1, Cat2-Battle1, Cat1-Battle2, Cat2-Battle2...        â”‚
â”‚  CURRENT:  Cat1-Battle1, Cat1-Battle2, Cat1-Battle3... (all Cat1 first)     â”‚
â”‚                                                                             â”‚
â”‚  NOTE: Sequential execution (one at a time) IS enforced âœ…                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    âœ… WORKING: CROSS-CATEGORY VALIDATION                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Location: app/validators/phase_validators.py                               â”‚
â”‚                                                                             â”‚
â”‚  All phase validators loop through ALL categories:                          â”‚
â”‚  - Registrationâ†’Preselection: All categories must meet minimum performers   â”‚
â”‚  - Preselectionâ†’Pools: All categories must have completed battles           â”‚
â”‚  - Poolsâ†’Finals: All categories must have pool winners                      â”‚
â”‚  - Finalsâ†’Completed: All categories must have champions                     â”‚
â”‚                                                                             â”‚
â”‚  Phase advancement blocked if ANY category is not ready. âœ…                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Configuration Parameters (Admin Sets)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ADMIN CONFIGURATION (Category Setup)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Parameter           â”‚ Value â”‚ Description                                  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  groups_ideal        â”‚   2   â”‚ Number of pools (FIXED, cannot change)       â”‚
â”‚  performers_ideal    â”‚   4   â”‚ Target performers per pool (ADAPTIVE â†“ only) â”‚
â”‚  is_duo              â”‚ false â”‚ 1v1 or 2v2 category                          â”‚
â”‚                      â”‚       â”‚                                              â”‚
â”‚  DERIVED VALUES:     â”‚       â”‚                                              â”‚
â”‚  ideal_capacity      â”‚   8   â”‚ = groups_ideal Ã— performers_ideal            â”‚
â”‚  minimum_required    â”‚   5   â”‚ = (groups_ideal Ã— 2) + 1 = (2Ã—2)+1           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  CORRECT POOL SIZING RULE (not yet implemented):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  If registered â‰¥ ideal_capacity:                                         â”‚
  â”‚     pool_capacity = ideal_capacity (e.g., 8)                              â”‚
  â”‚     eliminated = registered - ideal_capacity                              â”‚
  â”‚                                                                           â”‚
  â”‚  If registered < ideal_capacity:                                          â”‚
  â”‚     Reduce performers_ideal until registered â‰¥ (groups Ã— new_performers)  â”‚
  â”‚     + 1 eliminated                                                        â”‚
  â”‚                                                                           â”‚
  â”‚  EXAMPLES:                                                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ Registeredâ”‚ Ideal (2Ã—4) â”‚ Pool Capacityâ”‚ Eliminated â”‚ Pool Sizes  â”‚    â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
  â”‚  â”‚    12     â”‚     8       â”‚      8       â”‚     4      â”‚   [4, 4]    â”‚    â”‚
  â”‚  â”‚    10     â”‚     8       â”‚      8       â”‚     2      â”‚   [4, 4]    â”‚    â”‚
  â”‚  â”‚     9     â”‚     8       â”‚      8       â”‚     1      â”‚   [4, 4]    â”‚    â”‚
  â”‚  â”‚     8     â”‚     8       â”‚      6       â”‚     2      â”‚   [3, 3]    â”‚ â†  â”‚
  â”‚  â”‚     7     â”‚     8       â”‚      6       â”‚     1      â”‚   [3, 3]    â”‚    â”‚
  â”‚  â”‚     6     â”‚     8       â”‚      4       â”‚     2      â”‚   [2, 2]    â”‚ â†  â”‚
  â”‚  â”‚     5     â”‚     8       â”‚      4       â”‚     1      â”‚   [2, 2]    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                                           â”‚
  â”‚  Note: When registered = ideal, we REDUCE capacity to ensure elimination  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Worst-Case Scenario: 9 Performers, 2 Categories, Ties Everywhere

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TOURNAMENT FLOW                                    â”‚
â”‚          (9 Performers per Category, 2 Categories, 2 Pools Each)            â”‚
â”‚                        WITH CORRECT POOL SIZING                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 PHASE 1: REGISTRATION                                         [Status: CREATED]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  STAFF ACTIONS:                                                          â”‚
  â”‚  â€¢ Create tournament "Battle 2024"                                       â”‚
  â”‚  â€¢ Add Category 1: "Hip Hop 1v1" (groups_ideal=2, performers_ideal=4)    â”‚
  â”‚  â€¢ Add Category 2: "Breaking 1v1" (groups_ideal=2, performers_ideal=4)   â”‚
  â”‚  â€¢ Register 9 dancers in each category (18 total)                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Category 1 (Hip Hop):   P1, P2, P3, P4, P5, P6, P7, P8, P9  (9 total)
  Category 2 (Breaking):  B1, B2, B3, B4, B5, B6, B7, B8, B9  (9 total)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  VALIDATION CHECK (Registration â†’ Preselection):                         â”‚
  â”‚                                                                          â”‚
  â”‚  For EACH category:                                                      â”‚
  â”‚  âœ… Has minimum performers: 9 â‰¥ 5 (required = 2Ã—2+1)                     â”‚
  â”‚                                                                          â”‚
  â”‚  INFO: Pool capacity calculation (CORRECT behavior):                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚  registered = 9, ideal_capacity = 2Ã—4 = 8                          â”‚  â”‚
  â”‚  â”‚  Since 9 â‰¥ 8+1, we use ideal: pool_capacity = 8, eliminate = 1     â”‚  â”‚
  â”‚  â”‚  Pools will be [4, 4] (EQUAL!)                                     â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                                          â”‚
  â”‚  âœ… ALL categories validated (both must pass to advance)                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  [ADMIN CLICKS: Advance Phase] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 PHASE 2: PRESELECTION                                          [Status: ACTIVE]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  AUTO-GENERATED BATTLES (9 performers per category = 4 battles each):    â”‚
  â”‚                                                                          â”‚
  â”‚  Hip Hop (Cat 1):                    Breaking (Cat 2):                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ H1: P1 vs P2        (1v1)     â”‚  â”‚ K1: B1 vs B2        (1v1)     â”‚  â”‚
  â”‚  â”‚ H2: P3 vs P4        (1v1)     â”‚  â”‚ K2: B3 vs B4        (1v1)     â”‚  â”‚
  â”‚  â”‚ H3: P5 vs P6        (1v1)     â”‚  â”‚ K3: B5 vs B6        (1v1)     â”‚  â”‚
  â”‚  â”‚ H4: P7 vs P8 vs P9  (3-WAY)   â”‚  â”‚ K4: B7 vs B8 vs B9  (3-WAY)   â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                                          â”‚
  â”‚  Total: 8 preselection battles                                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸ“‹ BATTLE SCHEDULE (should be INTERLEAVED across categories):           â”‚
  â”‚                                                                          â”‚
  â”‚  EXPECTED ORDER (not yet implemented):                                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
  â”‚  â”‚ Seq  â”‚ Battle               â”‚ Category       â”‚                        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
  â”‚  â”‚  1   â”‚ H1: P1 vs P2         â”‚ Hip Hop        â”‚                        â”‚
  â”‚  â”‚  2   â”‚ K1: B1 vs B2         â”‚ Breaking       â”‚ â—„â”€â”€ Alternate!         â”‚
  â”‚  â”‚  3   â”‚ H2: P3 vs P4         â”‚ Hip Hop        â”‚                        â”‚
  â”‚  â”‚  4   â”‚ K2: B3 vs B4         â”‚ Breaking       â”‚                        â”‚
  â”‚  â”‚  5   â”‚ H3: P5 vs P6         â”‚ Hip Hop        â”‚                        â”‚
  â”‚  â”‚  6   â”‚ K3: B5 vs B6         â”‚ Breaking       â”‚                        â”‚
  â”‚  â”‚  7   â”‚ H4: P7 vs P8 vs P9   â”‚ Hip Hop        â”‚                        â”‚
  â”‚  â”‚  8   â”‚ K4: B7 vs B8 vs B9   â”‚ Breaking       â”‚                        â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
  â”‚                                                                          â”‚
  â”‚  CURRENT ORDER (BUG - all Cat1 first, then Cat2):                        â”‚
  â”‚  H1, H2, H3, H4, K1, K2, K3, K4                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  STAFF WORKFLOW (for each battle):                                       â”‚
  â”‚                                                                          â”‚
  â”‚  1. Click "Start Battle" (status: PENDING â†’ ACTIVE)                      â”‚
  â”‚     â””â”€â”€ Only ONE battle can be ACTIVE at a time (enforced) âœ…            â”‚
  â”‚  2. Battle happens on stage (MC announces)                               â”‚
  â”‚  3. Judges score each performer (0.0 - 10.0)                             â”‚
  â”‚  4. Staff clicks "Encode Result"                                         â”‚
  â”‚     â”œâ”€â”€ For 1v1: Enter 2 scores                                          â”‚
  â”‚     â””â”€â”€ For 3-way: Enter 3 scores                                        â”‚
  â”‚  5. Battle completes (status: ACTIVE â†’ COMPLETED)                        â”‚
  â”‚  6. Performer.preselection_score updated                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  AFTER ALL BATTLES ENCODED (Hip Hop example):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  PRESELECTION SCORES (sorted descending):                                â”‚
  â”‚                                                                          â”‚
  â”‚  Pool Capacity = 8 (ideal), Eliminate = 1                                â”‚
  â”‚                                                                          â”‚
  â”‚  Rank â”‚ Performer â”‚ Score â”‚ Status                                       â”‚
  â”‚  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚    1  â”‚    P3     â”‚  9.5  â”‚ âœ… Qualifies (spot 1/8)                       â”‚
  â”‚    2  â”‚    P1     â”‚  9.0  â”‚ âœ… Qualifies (spot 2/8)                       â”‚
  â”‚    3  â”‚    P7     â”‚  8.5  â”‚ âœ… Qualifies (spot 3/8)                       â”‚
  â”‚    4  â”‚    P5     â”‚  8.0  â”‚ âœ… Qualifies (spot 4/8)                       â”‚
  â”‚  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚    5  â”‚    P2     â”‚  7.5  â”‚ âš ï¸ TIE AT BOUNDARY (5 performers @ 7.5)       â”‚
  â”‚    6  â”‚    P4     â”‚  7.5  â”‚ âš ï¸ TIE AT BOUNDARY â—„â”€â”€ ALL must compete!     â”‚
  â”‚    7  â”‚    P8     â”‚  7.5  â”‚ âš ï¸ TIE AT BOUNDARY                           â”‚
  â”‚    8  â”‚    P6     â”‚  7.5  â”‚ âš ï¸ TIE AT BOUNDARY                           â”‚
  â”‚  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚    9  â”‚    P9     â”‚  7.5  â”‚ âš ï¸ TIE AT BOUNDARY (same score as spots 5-8) â”‚
  â”‚  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚                                                                          â”‚
  â”‚  ğŸš¨ FAIRNESS RULE: All 5 performers with 7.5 must compete in tiebreak!   â”‚
  â”‚  You cannot arbitrarily let P2/P4/P8 qualify while P6/P9 battle.         â”‚
  â”‚  They ALL have the same score - TIEBREAK determines spots 5-8.           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸš¨ TIEBREAK BATTLE REQUIRED (should be auto-created):                   â”‚
  â”‚                                                                          â”‚
  â”‚  Tiebreak Battle: P2 vs P4 vs P8 vs P6 vs P9  (ALL 5 tied performers!)   â”‚
  â”‚  winners_needed = 4 (spots 5, 6, 7, 8)                                   â”‚
  â”‚  Mode: ELIMINATE (N > 2)                                                 â”‚
  â”‚                                                                          â”‚
  â”‚  Round 1: Judges vote to ELIMINATE â†’ P9 eliminated (4 remain)            â”‚
  â”‚  Result: P2, P4, P8, P6 advance (spots 5-8), P9 eliminated               â”‚
  â”‚                                                                          â”‚
  â”‚  Note: Since winners_needed=4 and 5 tied, only 1 elimination round neededâ”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  VALIDATION CHECK (Preselection â†’ Pools):                                â”‚
  â”‚  âœ… ALL categories: preselection battles completed                       â”‚
  â”‚  âœ… ALL categories: performers have scores                               â”‚
  â”‚  âœ… ALL categories: tiebreak battles resolved                            â”‚
  â”‚                                                                          â”‚
  â”‚  (Both Hip Hop AND Breaking must be complete!)                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  [ADMIN CLICKS: Advance Phase] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 PHASE 3: POOLS                                                  [Status: ACTIVE]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  AUTO-CREATED POOLS (8 performers â†’ 2 pools of 4 each, PER CATEGORY):    â”‚
  â”‚                                                                          â”‚
  â”‚  Hip Hop:                                                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚  â”‚       POOL A (4)        â”‚    â”‚       POOL B (4)        â”‚              â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
  â”‚  â”‚  P3  (seed 1)           â”‚    â”‚  P1  (seed 2)           â”‚              â”‚
  â”‚  â”‚  P5  (seed 4)           â”‚    â”‚  P7  (seed 3)           â”‚ â† Snake      â”‚
  â”‚  â”‚  P2  (seed 5)           â”‚    â”‚  P4  (seed 6)           â”‚   draft      â”‚
  â”‚  â”‚  P6  (seed 8)           â”‚    â”‚  P8  (seed 7)           â”‚              â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                                          â”‚
  â”‚  Breaking: (same structure with B1-B8)                                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚  â”‚       POOL A (4)        â”‚    â”‚       POOL B (4)        â”‚              â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                                          â”‚
  â”‚  âœ… ALL POOLS HAVE EQUAL SIZE (4 each)                                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  AUTO-GENERATED POOL BATTLES (Round-Robin per pool):                     â”‚
  â”‚                                                                          â”‚
  â”‚  Hip Hop Pool A (4 performers â†’ 6 battles):                              â”‚
  â”‚  HA1: P3 vs P5, HA2: P3 vs P2, HA3: P3 vs P6                             â”‚
  â”‚  HA4: P5 vs P2, HA5: P5 vs P6, HA6: P2 vs P6                             â”‚
  â”‚                                                                          â”‚
  â”‚  Hip Hop Pool B (4 performers â†’ 6 battles):                              â”‚
  â”‚  HB1: P1 vs P7, HB2: P1 vs P4, HB3: P1 vs P8                             â”‚
  â”‚  HB4: P7 vs P4, HB5: P7 vs P8, HB6: P4 vs P8                             â”‚
  â”‚                                                                          â”‚
  â”‚  Breaking Pool A (4 â†’ 6 battles) + Pool B (4 â†’ 6 battles)                â”‚
  â”‚                                                                          â”‚
  â”‚  Total: 24 pool battles (4 pools Ã— 6 battles each)                       â”‚
  â”‚                                                                          â”‚
  â”‚  Formula: C(n,2) = nÃ—(n-1)/2 = 4Ã—3/2 = 6 battles per pool                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸ“‹ POOL BATTLE SCHEDULE (should be INTERLEAVED):                        â”‚
  â”‚                                                                          â”‚
  â”‚  EXPECTED: HA1, HB1, KA1, KB1, HA2, HB2, KA2, KB2, ...                   â”‚
  â”‚  (Rotate through all 4 pools across both categories)                     â”‚
  â”‚                                                                          â”‚
  â”‚  CURRENT (BUG): HA1-HA6, HB1-HB6, KA1-KA6, KB1-KB6                       â”‚
  â”‚  (All one pool, then next pool - boring for audience!)                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  STAFF WORKFLOW (for each pool battle):                                  â”‚
  â”‚                                                                          â”‚
  â”‚  1. Start Battle                                                         â”‚
  â”‚  2. Battle happens                                                       â”‚
  â”‚  3. Encode Result:                                                       â”‚
  â”‚     â”œâ”€â”€ WIN:  Winner gets 3 points, Loser gets 0 points                  â”‚
  â”‚     â””â”€â”€ DRAW: Both get 1 point                                           â”‚
  â”‚  4. Performer.pool_wins/pool_draws/pool_losses updated                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  AFTER ALL POOL BATTLES ENCODED (Hip Hop example):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  HIP HOP POOL A:                        HIP HOP POOL B:                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚ Rank â”‚ Perf â”‚ W â”‚ D â”‚ L â”‚ Pts   â”‚   â”‚ Rank â”‚ Perf â”‚ W â”‚ D â”‚ L â”‚Pts â”‚ â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ â”‚
  â”‚  â”‚  1   â”‚  P3  â”‚ 2 â”‚ 1 â”‚ 0 â”‚   7   â”‚   â”‚  1   â”‚  P1  â”‚ 3 â”‚ 0 â”‚ 0 â”‚  9 â”‚ â”‚
  â”‚  â”‚  1   â”‚  P5  â”‚ 2 â”‚ 1 â”‚ 0 â”‚   7   â”‚   â”‚  2   â”‚  P7  â”‚ 2 â”‚ 0 â”‚ 1 â”‚  6 â”‚ â”‚
  â”‚  â”‚  3   â”‚  P2  â”‚ 0 â”‚ 1 â”‚ 2 â”‚   1   â”‚   â”‚  3   â”‚  P4  â”‚ 1 â”‚ 0 â”‚ 2 â”‚  3 â”‚ â”‚
  â”‚  â”‚  4   â”‚  P6  â”‚ 0 â”‚ 1 â”‚ 2 â”‚   1   â”‚   â”‚  4   â”‚  P8  â”‚ 0 â”‚ 0 â”‚ 3 â”‚  0 â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                                                                          â”‚
  â”‚  âš ï¸ POOL A HAS TIE: P3 and P5 both have 7 points!                        â”‚
  â”‚  âœ… Pool B has clear winner: P1 (9 points)                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸš¨ POOL TIEBREAK BATTLE REQUIRED (should be auto-created):              â”‚
  â”‚                                                                          â”‚
  â”‚  Tiebreak Battle: P3 vs P5                                               â”‚
  â”‚  winners_needed = 1 (pool winner)                                        â”‚
  â”‚  Mode: KEEP (N = 2)                                                      â”‚
  â”‚                                                                          â”‚
  â”‚  Judges vote for who to KEEP â†’ P3 gets more votes                        â”‚
  â”‚  Result: P3 is Pool A winner                                             â”‚
  â”‚                                                                          â”‚
  â”‚  pool.winner_id = P3.id  (set after tiebreak)                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  POOL WINNERS (Hip Hop):                                                 â”‚
  â”‚  â€¢ Pool A Winner: P3                                                     â”‚
  â”‚  â€¢ Pool B Winner: P1                                                     â”‚
  â”‚                                                                          â”‚
  â”‚  (Breaking also has 2 pool winners - B? and B?)                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  VALIDATION CHECK (Pools â†’ Finals):                                      â”‚
  â”‚  âœ… ALL categories: all pool battles completed                           â”‚
  â”‚  âœ… ALL categories: each pool has exactly 1 winner                       â”‚
  â”‚  âœ… ALL categories: pool count matches groups_ideal                      â”‚
  â”‚                                                                          â”‚
  â”‚  (Both Hip Hop AND Breaking must have all pools complete!)               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  [ADMIN CLICKS: Advance Phase] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 PHASE 4: FINALS                                                 [Status: ACTIVE]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  AUTO-GENERATED FINALS BATTLES (1 per category):                         â”‚
  â”‚                                                                          â”‚
  â”‚  Hip Hop Finals:  P3 (Pool A winner) vs P1 (Pool B winner)               â”‚
  â”‚  Breaking Finals: B3 (Pool A winner) vs B1 (Pool B winner)               â”‚
  â”‚                                                                          â”‚
  â”‚  outcome_type: WIN_LOSS (no draws in finals!)                            â”‚
  â”‚                                                                          â”‚
  â”‚  Total: 2 finals battles (one per category)                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  ğŸ“‹ FINALS BATTLE SCHEDULE (should be INTERLEAVED):                      â”‚
  â”‚                                                                          â”‚
  â”‚  EXPECTED ORDER:                                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
  â”‚  â”‚ Seq  â”‚ Battle               â”‚ Category       â”‚                        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
  â”‚  â”‚  1   â”‚ P3 vs P1             â”‚ Hip Hop        â”‚                        â”‚
  â”‚  â”‚  2   â”‚ B3 vs B1             â”‚ Breaking       â”‚                        â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  STAFF WORKFLOW (for each finals battle):                                â”‚
  â”‚                                                                          â”‚
  â”‚  1. Start Finals Battle                                                  â”‚
  â”‚  2. Epic battle happens on stage                                         â”‚
  â”‚  3. Encode Result: SELECT WINNER (no draw option)                        â”‚
  â”‚  4. Battle completes with winner_id set                                  â”‚
  â”‚                                                                          â”‚
  â”‚  Results:                                                                â”‚
  â”‚  â€¢ Hip Hop Finals:  P3 wins â†’ P3 is Hip Hop Champion                     â”‚
  â”‚  â€¢ Breaking Finals: B1 wins â†’ B1 is Breaking Champion                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  VALIDATION CHECK (Finals â†’ Completed):                                  â”‚
  â”‚  âœ… ALL categories: finals battle completed                              â”‚
  â”‚  âœ… ALL categories: finals battle has winner (no draw)                   â”‚
  â”‚                                                                          â”‚
  â”‚  ğŸš¨ CROSS-CATEGORY VALIDATION:                                           â”‚
  â”‚  Phase advancement is BLOCKED until ALL categories have:                 â”‚
  â”‚  - Completed their finals battle                                         â”‚
  â”‚  - A clear winner (no draws allowed in finals)                           â”‚
  â”‚                                                                          â”‚
  â”‚  (Both Hip Hop AND Breaking finals must be complete!)                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  [ADMIN CLICKS: Advance Phase] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 PHASE 5: COMPLETED                                           [Status: COMPLETED]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                                          â”‚
  â”‚   ğŸ† TOURNAMENT CHAMPIONS (per category):                                â”‚
  â”‚                                                                          â”‚
  â”‚   Hip Hop 1v1:  P3                                                       â”‚
  â”‚   Breaking 1v1: B1                                                       â”‚
  â”‚                                                                          â”‚
  â”‚   Tournament "Battle 2024" Complete!                                     â”‚
  â”‚                                                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         IMPLEMENTATION STATUS SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FEATURE                              â”‚ STATUS    â”‚ NOTES                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Odd performers â†’ 3-way battle        â”‚ âœ… Works  â”‚ Correctly implemented   â”‚
â”‚  3-way battle encoding (3 scores)     â”‚ âœ… Works  â”‚ Correctly implemented   â”‚
â”‚  Cross-category phase validation      â”‚ âœ… Works  â”‚ All cats must complete  â”‚
â”‚  Sequential battles (1 active)        â”‚ âœ… Works  â”‚ Enforced correctly      â”‚
â”‚  KEEP tiebreak mode (N=2)             â”‚ âœ… Works  â”‚ Logic exists            â”‚
â”‚  ELIMINATE tiebreak mode (N>2)        â”‚ âœ… Works  â”‚ Logic exists            â”‚
â”‚  Finals must have winner              â”‚ âœ… Works  â”‚ Correctly validated     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pool sizing (equal pools)            â”‚ ğŸš¨ BUG    â”‚ Uses 25% rule instead   â”‚
â”‚  Preselection tie auto-tiebreak       â”‚ ğŸš¨ GAP    â”‚ Not auto-created        â”‚
â”‚  Pool winner tie auto-tiebreak        â”‚ ğŸš¨ GAP    â”‚ Not auto-created        â”‚
â”‚  Battle schedule interleaving         â”‚ ğŸš¨ GAP    â”‚ All Cat1, then Cat2     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         ADMIN-CONFIGURABLE PARAMETERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PARAMETER         â”‚ WHERE SET        â”‚ IMPACT                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  groups_ideal      â”‚ Category creationâ”‚ # of pools, FIXED throughout       â”‚
â”‚  performers_ideal  â”‚ Category creationâ”‚ Target per pool, ADAPTIVE DOWN     â”‚
â”‚                    â”‚                  â”‚ (reduced if not enough registered) â”‚
â”‚  is_duo            â”‚ Category creationâ”‚ 1v1 or 2v2 battles                 â”‚
â”‚  Tournament name   â”‚ Tournament setup â”‚ Display only                       â”‚
â”‚  Category name     â”‚ Category creationâ”‚ Display only                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RUNTIME DECISIONS (Staff controls):                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Battle start      â”‚ Battle list      â”‚ When to start each battle          â”‚
â”‚  Score encoding    â”‚ Encode screen    â”‚ Judge scores (0-10) or win/draw    â”‚
â”‚  Phase advance     â”‚ Phase overview   â”‚ When to move to next phase         â”‚
â”‚  Tiebreak votes    â”‚ Tiebreak screen  â”‚ Judge votes for KEEP/ELIMINATE     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              BATTLE COUNT FORMULAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  PRESELECTION BATTLES                                                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                                            â”‚
  â”‚  Purpose: Every performer battles once to get a score (0-10)               â”‚
  â”‚                                                                            â”‚
  â”‚  Given:                                                                    â”‚
  â”‚    N = number of registered performers in the category                     â”‚
  â”‚                                                                            â”‚
  â”‚  Formula:                                                                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚  If N is even:  battles = N / 2                                     â”‚   â”‚
  â”‚  â”‚                 breakdown: (N/2) Ã— 1v1 battles                       â”‚   â”‚
  â”‚  â”‚                                                                     â”‚   â”‚
  â”‚  â”‚  If N is odd:   battles = âŒŠN/2âŒ‹                                     â”‚   â”‚
  â”‚  â”‚                 breakdown: ((N-3)/2) Ã— 1v1 battles + 1 Ã— 3-way      â”‚   â”‚
  â”‚  â”‚                                                                     â”‚   â”‚
  â”‚  â”‚  Unified formula: battles = âŒŠN/2âŒ‹                                   â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                                            â”‚
  â”‚  Why âŒŠN/2âŒ‹? Each battle accommodates 2 performers (or 3 for the odd one). â”‚
  â”‚  The 3-way battle "absorbs" the extra performer when N is odd.             â”‚
  â”‚                                                                            â”‚
  â”‚  Examples:                                                                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚   N   â”‚  âŒŠN/2âŒ‹     â”‚ Breakdown                   â”‚ Total battles     â”‚  â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
  â”‚  â”‚   4   â”‚  2         â”‚ 2 Ã— (1v1)                   â”‚   2               â”‚  â”‚
  â”‚  â”‚   5   â”‚  2         â”‚ 1 Ã— (1v1) + 1 Ã— (3-way)     â”‚   2               â”‚  â”‚
  â”‚  â”‚   6   â”‚  3         â”‚ 3 Ã— (1v1)                   â”‚   3               â”‚  â”‚
  â”‚  â”‚   7   â”‚  3         â”‚ 2 Ã— (1v1) + 1 Ã— (3-way)     â”‚   3               â”‚  â”‚
  â”‚  â”‚   8   â”‚  4         â”‚ 4 Ã— (1v1)                   â”‚   4               â”‚  â”‚
  â”‚  â”‚   9   â”‚  4         â”‚ 3 Ã— (1v1) + 1 Ã— (3-way)     â”‚   4               â”‚  â”‚
  â”‚  â”‚  10   â”‚  5         â”‚ 5 Ã— (1v1)                   â”‚   5               â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  POOL BATTLES (Round-Robin)                                                â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                                            â”‚
  â”‚  Purpose: Every performer in a pool battles every other performer once     â”‚
  â”‚                                                                            â”‚
  â”‚  Formula per pool:                                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚  battles_per_pool = P Ã— (P-1) / 2                                   â”‚   â”‚
  â”‚  â”‚                                                                     â”‚   â”‚
  â”‚  â”‚  Where P = performers per pool                                      â”‚   â”‚
  â”‚  â”‚                                                                     â”‚   â”‚
  â”‚  â”‚  Why this formula? Each performer fights everyone else once:        â”‚   â”‚
  â”‚  â”‚  â€¢ P performers Ã— (P-1) opponents = all matchups                    â”‚   â”‚
  â”‚  â”‚  â€¢ Divide by 2 because A vs B = B vs A (don't count twice)          â”‚   â”‚
  â”‚  â”‚                                                                     â”‚   â”‚
  â”‚  â”‚  Example with 4 performers (A, B, C, D):                            â”‚   â”‚
  â”‚  â”‚  A vs B, A vs C, A vs D, B vs C, B vs D, C vs D = 6 battles         â”‚   â”‚
  â”‚  â”‚  Formula: 4 Ã— 3 / 2 = 6 âœ“                                           â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                                            â”‚
  â”‚  Formula per category:                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚  battles_per_category = G Ã— (P Ã— (P-1) / 2)                         â”‚   â”‚
  â”‚  â”‚                                                                     â”‚   â”‚
  â”‚  â”‚  Where G = number of pools (groups_ideal)                           â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                                            â”‚
  â”‚  Examples:                                                                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚ Pool Config â”‚ Calculation                         â”‚ Battles/Categoryâ”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ 2 pools Ã— 2 â”‚ 2 Ã— (2Ã—1/2) = 2 Ã— 1                 â”‚   2 battles     â”‚   â”‚
  â”‚  â”‚ 2 pools Ã— 3 â”‚ 2 Ã— (3Ã—2/2) = 2 Ã— 3                 â”‚   6 battles     â”‚   â”‚
  â”‚  â”‚ 2 pools Ã— 4 â”‚ 2 Ã— (4Ã—3/2) = 2 Ã— 6                 â”‚  12 battles     â”‚   â”‚
  â”‚  â”‚ 2 pools Ã— 5 â”‚ 2 Ã— (5Ã—4/2) = 2 Ã— 10                â”‚  20 battles     â”‚   â”‚
  â”‚  â”‚ 3 pools Ã— 4 â”‚ 3 Ã— (4Ã—3/2) = 3 Ã— 6                 â”‚  18 battles     â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  TIEBREAK BATTLES                                                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                                            â”‚
  â”‚  Purpose: Resolve ties at qualification boundaries or pool winner ties     â”‚
  â”‚                                                                            â”‚
  â”‚  When they occur:                                                          â”‚
  â”‚  â€¢ Preselection â†’ Pools: tie at qualification cutoff                       â”‚
  â”‚  â€¢ Pools â†’ Finals: tie for pool winner (multiple performers same points)  â”‚
  â”‚                                                                            â”‚
  â”‚  Count: Variable (0 to N depending on ties)                                â”‚
  â”‚  â€¢ Best case: 0 tiebreaks (no ties anywhere)                               â”‚
  â”‚  â€¢ Worst case: 1 per category for presel + 1 per pool for pool winner     â”‚
  â”‚                                                                            â”‚
  â”‚  Example (worst case, 2 categories, 2 pools each):                         â”‚
  â”‚  â€¢ 2 preselection tiebreaks (one per category)                             â”‚
  â”‚  â€¢ 4 pool winner tiebreaks (one per pool)                                  â”‚
  â”‚  â€¢ Maximum: 6 tiebreak battles                                             â”‚
  â”‚                                                                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  FINALS BATTLES                                                            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                                            â”‚
  â”‚  Purpose: Pool winners compete for category champion                       â”‚
  â”‚                                                                            â”‚
  â”‚  Formula:                                                                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚  For 2 pools: 1 battle per category (Pool A winner vs Pool B winner)â”‚   â”‚
  â”‚  â”‚  For 3+ pools: bracket system (future implementation)               â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                                            â”‚
  â”‚  Examples:                                                                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚ Categories  â”‚ Pools per category                  â”‚ Finals Battles  â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚      1      â”‚ 2                                   â”‚   1 battle      â”‚   â”‚
  â”‚  â”‚      2      â”‚ 2                                   â”‚   2 battles     â”‚   â”‚
  â”‚  â”‚      3      â”‚ 2                                   â”‚   3 battles     â”‚   â”‚
  â”‚  â”‚      5      â”‚ 2                                   â”‚   5 battles     â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           COMPLETE TOURNAMENT EXAMPLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Scenario: 2 categories (Hip Hop, Breaking), 9 performers each, 2 pools of 4

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  PHASE          â”‚ PER CATEGORY      â”‚ Ã— 2 CATEGORIES â”‚ SUBTOTAL           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Preselection   â”‚ 4 battles         â”‚ Ã— 2            â”‚   8 battles        â”‚
  â”‚                 â”‚ (3Ã—1v1 + 1Ã—3way)  â”‚                â”‚                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Pools          â”‚ 12 battles        â”‚ Ã— 2            â”‚  24 battles        â”‚
  â”‚                 â”‚ (2 pools Ã— 6)     â”‚                â”‚                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Tiebreaks      â”‚ 0-3 battles       â”‚ Ã— 2            â”‚   0-6 battles      â”‚
  â”‚  (if needed)    â”‚                   â”‚                â”‚                    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  Finals         â”‚ 1 battle          â”‚ Ã— 2            â”‚   2 battles        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  TOTALS:                                                                   â”‚
  â”‚                                                                            â”‚
  â”‚  Best case (no ties):   8 + 24 + 0 + 2 = 34 battles                        â”‚
  â”‚  Worst case (all ties): 8 + 24 + 6 + 2 = 40 battles                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

**End of Specification**
## 4. Business Rules & Acceptance Criteria

This section defines the formal business rules and acceptance criteria for the identified bugs and gaps.

---

### 4.1 BUG FIX: Pool Sizing (Equal Pools Only)

**Business Rule BR-POOL-001: Equal Pool Sizes**

> All pools within a category MUST have the same number of performers.
> Pool capacity is calculated as `groups_ideal Ã— performers_per_pool` where `performers_per_pool` is adaptive but equal across all pools.

**Acceptance Criteria:**

```gherkin
Feature: Pool Sizing - Equal Pools Only

  Background:
    Given a category with groups_ideal = 2
    And performers_ideal = 4 (target pool capacity = 8)

  Scenario: More performers than ideal capacity
    Given 10 performers are registered
    When pools are created from preselection results
    Then pool capacity should be 8 (2 Ã— 4)
    And 2 performers should be eliminated in preselection
    And both pools should have exactly 4 performers

  Scenario: Exactly ideal capacity registered
    Given 8 performers are registered
    When pools are created from preselection results
    Then pool capacity should be 6 (2 Ã— 3)
    And 2 performers should be eliminated in preselection
    And both pools should have exactly 3 performers

  Scenario: Fewer performers than ideal - reduce pool size
    Given 7 performers are registered
    When pools are created from preselection results
    Then pool capacity should be 6 (2 Ã— 3)
    And 1 performer should be eliminated in preselection
    And both pools should have exactly 3 performers

  Scenario: Minimum viable registration
    Given 5 performers are registered
    When pools are created from preselection results
    Then pool capacity should be 4 (2 Ã— 2)
    And 1 performer should be eliminated in preselection
    And both pools should have exactly 2 performers

  Scenario: Uneven pool sizes are never allowed
    Given any number of registered performers
    When pools are created
    Then all pools MUST have the same performer count
    And the system should NEVER create pools like [4, 3] or [5, 4]
```

**Pool Capacity Formula:**

```
Given:
  R = registered performers
  G = groups_ideal (fixed)
  P = performers_ideal (target)

Calculate:
  ideal_capacity = G Ã— P

  If R â‰¥ ideal_capacity + 1:
    pool_capacity = ideal_capacity
    eliminated = R - ideal_capacity

  Else (R < ideal_capacity + 1):
    Find largest P' where (G Ã— P') < R and P' â‰¥ 2
    pool_capacity = G Ã— P'
    eliminated = R - pool_capacity

Result:
  Each pool has exactly (pool_capacity / G) performers
```

---

### 4.2 GAP FIX: Preselection Tiebreak Auto-Detection

**Business Rule BR-TIE-001: Automatic Preselection Tiebreak Detection**

> When the last preselection battle in a category is completed (scored), the system MUST automatically check for ties at the qualification boundary. If ties exist, a tiebreak battle is automatically created and added to the battle queue.

**Trigger Point:** Battle completion (status: ACTIVE â†’ COMPLETED) when it's the last uncompleted preselection battle in the category.

**Acceptance Criteria:**

```gherkin
Feature: Preselection Tiebreak Auto-Detection

  Background:
    Given a category with pool capacity = 8
    And 9 performers registered
    And preselection battles have been generated

  Scenario: Tiebreak detected when last battle is scored (boundary score spans cutoff)
    Given 3 preselection battles are completed with scores
    And 1 preselection battle remains (the 3-way battle)
    And after scoring, performers will have these scores:
      | Performer | Score | Analysis                                      |
      | P1        | 9.5   | âœ… Qualifies (unique score)                   |
      | P2        | 9.0   | âœ… Qualifies (unique score)                   |
      | P3        | 8.5   | âœ… Qualifies (unique score)                   |
      | P4        | 8.0   | âœ… Qualifies (unique score)                   |
      | P5        | 7.5   | âš ï¸ TIE - boundary score spans positions 5-9  |
      | P6        | 7.5   | âš ï¸ TIE - ALL 5 must compete in tiebreak!     |
      | P7        | 7.5   | âš ï¸ TIE                                        |
      | P8        | 7.5   | âš ï¸ TIE                                        |
      | P9        | 7.5   | âš ï¸ TIE                                        |
    # 4 spots clearly filled (P1-P4), 4 spots remaining (5-8), 5 performers tied
    When staff encodes the last preselection battle result
    And the battle status changes to COMPLETED
    Then the system automatically detects a tie at the boundary score (7.5)
    And a tiebreak battle is created with ALL tied performers: P5, P6, P7, P8, P9
    And winners_needed = 4 (to fill spots 5, 6, 7, 8)
    And tiebreak mode is ELIMINATE (since N > 2)
    And the tiebreak battle status is PENDING
    And the tiebreak battle is added to the battle queue
    # IMPORTANT: P5, P6, P7, P8 cannot arbitrarily qualify just because they
    # appear "above the line" - they share the same score as P9!

  Scenario: No tiebreak needed - clear cutoff
    Given all preselection battles are completed
    And scores have a clear cutoff at position 8:
      | Performer | Score |
      | P1-P8     | 9.0-7.5 (all unique) |
      | P9        | 6.0   |
    When the last preselection battle is completed
    Then no tiebreak battle is created
    And the battle queue contains no new battles

  Scenario: Tiebreak blocks phase advancement naturally
    Given a tiebreak battle has been created and is PENDING
    When staff attempts to advance to Pools phase
    Then advancement is blocked
    And the reason is "Pending battles exist in the queue"
    And NOT "Tie detected at boundary" (the tiebreak IS the queue item)

  Scenario: Phase advances after tiebreak resolution
    Given a tiebreak battle was created for preselection ties
    And staff starts and completes the tiebreak battle
    And the winner is determined
    When staff attempts to advance to Pools phase
    Then all validation checks pass
    And the phase advances to POOLS
```

---

### 4.3 GAP FIX: Pool Winner Tiebreak Auto-Detection

**Business Rule BR-TIE-002: Automatic Pool Winner Tiebreak Detection**

> When the last pool battle within a pool is completed (scored), the system MUST automatically check for ties at the pool winner position. If multiple performers have the highest pool_points, a tiebreak battle is automatically created and added to the battle queue.

**Trigger Point:** Battle completion (status: ACTIVE â†’ COMPLETED) when it's the last uncompleted battle in that specific pool.

**Acceptance Criteria:**

```gherkin
Feature: Pool Winner Tiebreak Auto-Detection

  Background:
    Given a category with 2 pools (Pool A, Pool B)
    And each pool has 4 performers
    And round-robin pool battles have been generated (6 per pool)

  Scenario: Pool winner tiebreak detected when last pool battle is scored
    Given Pool A has 5 completed battles
    And Pool A standings before last battle:
      | Performer | W | D | L | Points |
      | P1        | 2 | 1 | 1 |   7    |
      | P2        | 2 | 1 | 1 |   7    |
      | P3        | 1 | 0 | 3 |   3    |
      | P4        | 0 | 2 | 2 |   2    |
    And the last battle is P3 vs P4
    When staff encodes the last Pool A battle result
    And the battle status changes to COMPLETED
    Then the system checks Pool A for winner ties
    And finds P1 and P2 tied with 7 points each
    And a tiebreak battle is created with performers P1, P2
    And winners_needed = 1 (pool winner)
    And the tiebreak battle is added to the battle queue

  Scenario: No pool winner tiebreak - clear winner
    Given Pool B has 5 completed battles
    And Pool B standings before last battle:
      | Performer | W | D | L | Points |
      | B1        | 3 | 0 | 1 |   9    |
      | B2        | 2 | 0 | 2 |   6    |
      | B3        | 1 | 0 | 3 |   3    |
      | B4        | 0 | 0 | 4 |   0    |
    When staff encodes the last Pool B battle result
    Then no tiebreak battle is created for Pool B
    And Pool B winner is automatically set to B1

  Scenario: Multiple pools can have ties simultaneously
    Given Pool A last battle is scored (creates P1 vs P2 tiebreak)
    And Pool B last battle is scored (creates B1 vs B2 tiebreak)
    Then both tiebreak battles exist in the queue
    And phase cannot advance until both are resolved

  Scenario: Pool winner set after tiebreak resolution
    Given a pool winner tiebreak battle exists for Pool A (P1 vs P2)
    And staff completes the tiebreak battle
    And P1 is determined as winner
    When the tiebreak battle status changes to COMPLETED
    Then Pool A's winner_id is set to P1
    And P1 can proceed to finals
```

---

### 4.4 GAP FIX: Battle Schedule Interleaving

**Business Rule BR-SCHED-001: Category-Interleaved Battle Queue**

> Battles should be scheduled in a round-robin fashion across categories to maintain audience engagement.

**Business Rule BR-SCHED-002: Battle Queue Reordering Constraints**

> Staff can reorder battles via drag-and-drop, with the following constraints:
> - **COMPLETED battles**: Cannot be moved (history is immutable)
> - **ACTIVE battle**: Cannot be moved (currently in progress)
> - **Next PENDING battle**: Cannot be moved (on deck, about to start)
> - **All other PENDING battles**: Can be freely reordered
>
> In other words: Only battles that are 2+ positions after the ACTIVE battle can be moved.

**Visual Reference:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Positionâ”‚ Status     â”‚ Can Move?  â”‚ Reason                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1-3    â”‚ COMPLETED  â”‚ âŒ LOCKED  â”‚ History cannot be changed   â”‚
â”‚  4      â”‚ ACTIVE     â”‚ âŒ LOCKED  â”‚ Battle in progress          â”‚
â”‚  5      â”‚ PENDING    â”‚ âŒ LOCKED  â”‚ "On deck" - next to start   â”‚
â”‚  6+     â”‚ PENDING    â”‚ âœ… MOVABLE â”‚ 2+ positions after ACTIVE   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Acceptance Criteria:**

```gherkin
Feature: Battle Schedule Interleaving and Reordering

  Background:
    Given a tournament with 2 categories
    And Category 1 (Hip Hop) has 4 preselection battles: H1, H2, H3, H4
    And Category 2 (Breaking) has 4 preselection battles: K1, K2, K3, K4

  Scenario: Default battle order is interleaved
    When preselection battles are generated for both categories
    Then the battle queue should be ordered as:
      | Position | Battle | Category  |
      | 1        | H1     | Hip Hop   |
      | 2        | K1     | Breaking  |
      | 3        | H2     | Hip Hop   |
      | 4        | K2     | Breaking  |
      | 5        | H3     | Hip Hop   |
      | 6        | K3     | Breaking  |
      | 7        | H4     | Hip Hop   |
      | 8        | K4     | Breaking  |
    And NOT ordered as H1, H2, H3, H4, K1, K2, K3, K4

  Scenario: Staff can reorder movable battles via drag-and-drop
    Given the battle queue state is:
      | Position | Battle | Status    |
      | 1        | H1     | COMPLETED |
      | 2        | K1     | COMPLETED |
      | 3        | H2     | ACTIVE    |
      | 4        | K2     | PENDING   |  # On deck - LOCKED
      | 5        | H3     | PENDING   |  # MOVABLE
      | 6        | K3     | PENDING   |  # MOVABLE
      | 7        | H4     | PENDING   |  # MOVABLE
      | 8        | K4     | PENDING   |  # MOVABLE
    When staff drags K4 from position 8 to position 5
    Then the queue is reordered: H3â†’6, K3â†’7, H4â†’8
    And K4 is now at position 5

  Scenario: Completed battles cannot be moved
    Given battle H1 has status COMPLETED
    When staff attempts to drag H1 to another position
    Then the operation is rejected
    And an error message indicates "Completed battles cannot be moved"

  Scenario: Active battle cannot be moved
    Given battle H2 has status ACTIVE
    When staff attempts to drag H2 to another position
    Then the operation is rejected
    And an error message indicates "Active battle cannot be moved"

  Scenario: Next pending battle (on deck) cannot be moved
    Given battle K2 is the first PENDING battle after the ACTIVE battle
    When staff attempts to drag K2 to another position
    Then the operation is rejected
    And an error message indicates "Next battle is locked and cannot be moved"

  Scenario: Cannot move a battle into a locked position
    Given battle K3 is movable (position 6)
    When staff attempts to drag K3 to position 4 (on deck slot)
    Then the operation is rejected
    And an error message indicates "Cannot move battle to a locked position"

  Scenario: Tiebreak battles inserted into interleaved queue
    Given the battle queue has completed battles and pending battles
    And a preselection tiebreak is created for Hip Hop
    When the tiebreak is added to the queue
    Then it is inserted at the appropriate position
    And maintains round-robin order with other pending battles

  Scenario: Uneven category battle counts handled gracefully
    Given Category 1 has 4 battles
    And Category 2 has 6 battles
    When the queue is generated
    Then the queue interleaves as much as possible:
      | Position | Battle |
      | 1        | H1     |
      | 2        | K1     |
      | 3        | H2     |
      | 4        | K2     |
      | 5        | H3     |
      | 6        | K3     |
      | 7        | H4     |
      | 8        | K4     |
      | 9        | K5     |
      | 10       | K6     |
```

---

### 4.5 Tiebreak Format Rules

**Business Rule BR-TIE-003: Boundary Score Fairness Principle**

> When detecting ties, ALL performers with the boundary score must be included in the tiebreak, regardless of their position in the sorted list. The boundary score is the score at the last qualifying position. If 5 performers share this score but only 4 spots are available, ALL 5 must compete - you cannot arbitrarily let some qualify while others battle.

**Formula:**
```
boundary_score = score of performer at position [pool_capacity]
tied_performers = all performers where score == boundary_score
spots_available = pool_capacity - (performers with score > boundary_score)
winners_needed = spots_available
elimination_rounds = tied_performers - winners_needed
```

**Business Rule BR-TIE-004: Tiebreak Battle Format**

> Tiebreak battles are single battles where judges vote. The number of winners needed equals the exact number of spots to fill.

**Acceptance Criteria:**

```gherkin
Feature: Tiebreak Battle Format

  Scenario: KEEP mode for 2 performers tied
    Given 2 performers are tied at a boundary
    And 1 spot needs to be filled
    When the tiebreak battle is created
    Then winners_needed = 1
    And tiebreak mode is KEEP
    And judges vote for which performer to KEEP

  Scenario: ELIMINATE mode for 3+ performers tied
    Given 3 performers are tied at a boundary
    And 1 spot needs to be filled
    When the tiebreak battle is created
    Then winners_needed = 1
    And tiebreak mode is ELIMINATE
    And judges vote for which performer to ELIMINATE
    And the process repeats until 1 remains

  Scenario: Multiple spots to fill (4 tied, 2 spots)
    Given 4 performers are tied at boundary
    And 2 spots need to be filled
    When the tiebreak battle is created
    Then winners_needed = 2
    And tiebreak mode is ELIMINATE
    And judges vote to ELIMINATE one performer at a time
    And the process repeats until only 2 remain
    # Elimination rounds needed = tied_performers - winners_needed = 4 - 2 = 2 rounds

  Scenario: Large tiebreak (5 tied for 4 spots - common case)
    Given 5 performers are tied at a boundary score
    And 4 spots need to be filled (only 1 must be eliminated)
    When the tiebreak battle is created
    Then winners_needed = 4
    And tiebreak mode is ELIMINATE (N > 2)
    And only 1 elimination round is needed
    And after 1 performer is eliminated, the remaining 4 advance
    # IMPORTANT: This is the scenario in our flow diagram example!
    # All 5 performers with the boundary score compete, not just those
    # "below the line" - fairness requires equal treatment of equal scores.
```

---

## 5. Current State Analysis

This section provides detailed technical analysis of the current implementation.

---

### 5.1 Tie Handling at Boundaries

#### 5.1.1 Preselection Qualification Ties

**Business Rule:** When multiple performers have the same preselection score at the qualification cutoff, a tiebreak battle is needed.

**Implementation Status:** âš ï¸ **PARTIAL - INTEGRATION GAP CONFIRMED**

**Evidence:**
- `app/services/tiebreak_service.py::detect_preselection_ties()` correctly:
  - Sorts performers by preselection_score descending
  - Identifies the cutoff score at pool capacity boundary
  - Returns all performers with the cutoff score if more exist than spots available
  - Returns empty list if no tie exists

**Test Coverage:** âœ… **COVERED (Unit Tests Only)**
- `tests/test_tiebreak_service.py::TestDetectPreselectionTies` covers:
  - No tie when all qualify
  - No tie with clear cutoff (unique scores)
  - Tie at boundary (3 performers with same score, 2 spots)
  - Tie when all tied performers fit (no tiebreak needed)
  - Missing scores error handling

**ğŸš¨ CRITICAL GAP CONFIRMED:**

After deep-dive analysis of the code, I can confirm the **tiebreak detection is NOT integrated** into phase transitions:

**Code Review of `TournamentService._execute_phase_transition_hooks()` (lines 198-230):**
```python
# PRESELECTION â†’ POOLS transition (line 211-230)
for category in categories:
    # Create pools from preselection qualification
    pools = await self._pool_service.create_pools_from_preselection(
        category.id, category.groups_ideal
    )
    # ... generates pool battles
```

**Code Review of `PoolService.create_pools_from_preselection()` (lines 87-93):**
```python
# Sort by preselection score (descending) and select top performers
sorted_performers = sorted(performers, key=lambda p: p.preselection_score, reverse=True)
qualified_performers = sorted_performers[:pool_performers_count]  # â† Simply takes top N!
```

**The Problem:**
- `create_pools_from_preselection()` uses `sorted_performers[:pool_performers_count]`
- This is a **deterministic slice** that arbitrarily picks some tied performers over others
- **NO call to `TiebreakService.detect_preselection_ties()`** exists in the flow
- **NO tiebreak battle creation** for boundary ties

**Impact:** If 3 performers are tied at 7.5 and only 2 spots remain, the system will arbitrarily take the first 2 (based on creation order or UUID), which is **unfair and incorrect**.

**Required Fix:**
1. Before calling `create_pools_from_preselection()`, call `TiebreakService.detect_preselection_ties()`
2. If ties detected, create tiebreak battle and **block phase advancement**
3. After tiebreak resolution, re-run the pool creation with resolved rankings

---

#### 5.1.2 Pool Winner Ties

**Business Rule:** When multiple performers have the same highest pool_points in a pool, a tiebreak battle determines the single winner.

**Implementation Status:** âš ï¸ **PARTIAL - BLOCKING WORKS, BUT MANUAL INTERVENTION NEEDED**

**Evidence:**
- `app/services/pool_service.py::get_pool_winners()`:
  - Finds performers with highest pool_points in each pool
  - If tie exists (>1 performer with max points), returns all tied performers
  - Only sets `pool.winner_id` if exactly one winner

- `app/services/pool_service.py::check_for_ties()`:
  - Explicitly checks for ties in pool winner determination
  - Returns dictionary mapping pool_id â†’ tied performers

**Phase Validation (Blocking Works):**
- `phase_validators.py::validate_pools_to_finals()` correctly checks `pools_without_winner`
- If any pool has no `winner_id` set, phase advancement is blocked
- This means ties will **block advancement** but require **manual tiebreak creation**

**Workflow Status:**
| Step | Status |
|------|--------|
| Detect pool winner ties | âœ… Works (`check_for_ties()`) |
| Auto-create tiebreak battle | âŒ **NOT IMPLEMENTED** |
| Block phase advancement | âœ… Works (`pools_without_winner` check) |
| Set winner after tiebreak | âœ… Works (`set_pool_winner()`) |

**Impact:**
- Phase advancement is correctly blocked when ties exist
- But staff must **manually create** tiebreak battles (not user-friendly)
- System doesn't guide staff on what to do

**Recommended Fix:**
1. After all pool battles complete, auto-run `check_for_ties()`
2. If ties found, auto-create tiebreak battles via `TiebreakService.create_tiebreak_battle()`
3. Show clear UI messaging: "Pool A has a tie - complete tiebreak battle"

---

### 5.2 Odd Number of Performers

#### 5.2.1 Preselection Battle Generation

**Business Rule:** When odd number of performers, create 1v1 battles with one 3-way battle for remaining performers.

**Implementation Status:** âœ… **IMPLEMENTED**

**Evidence:**
- `app/services/battle_service.py::generate_preselection_battles()`:
  - Shuffles performers randomly
  - If exactly 3 performers â†’ one 3-way battle
  - If odd number > 3 â†’ creates 1v1 battles, leaves last 3 for a 3-way battle
  - If even number â†’ all 1v1 battles

**Test Coverage:** âœ… **COVERED**
- `tests/test_battle_service.py::TestGeneratePreselectionBattles` covers:
  - Even number (4 performers â†’ 2 battles of 2)
  - Odd number (5 performers â†’ 1 battle of 2, 1 battle of 3)
  - Exactly 3 performers â†’ 1 battle of 3
  - No performers â†’ error

**Status:** âœ… **PRODUCTION READY** - This scenario is correctly handled and tested.

---

#### 5.2.2 Preselection 3-Way Battle Encoding

**Business Rule:** 3-way battles in preselection use scored outcome (0-10 per performer).

**Implementation Status:** âœ… **IMPLEMENTED**

**Evidence:**
- `app/models/battle.py::set_scored_outcome()` stores scores as dict {performer_id: score}
- `app/services/battle_results_encoding_service.py` handles preselection encoding
- VALIDATION_RULES.md confirms: scores 0.0-10.0, all performers must be scored

**Status:** âœ… **PRODUCTION READY**

---

### 5.3 Phase Validation Review

#### 5.3.1 REGISTRATION â†’ PRESELECTION

**Validation Rules:**
- âœ… Tournament must have at least one category
- âœ… Each category must have minimum performers: `(groups_ideal Ã— 2) + 1`
- âœ… Checks for exactly minimum (warning) vs below minimum (error)
- âœ… Auto-activates tournament (CREATED â†’ ACTIVE)
- âœ… Blocks if another tournament is active

**Implementation:** `app/validators/phase_validators.py::validate_registration_to_preselection()`

**Status:** âœ… **PRODUCTION READY**

---

#### 5.3.2 PRESELECTION â†’ POOLS

**Validation Rules:**
- âœ… All preselection battles must be completed
- âœ… All performers must have preselection scores
- âœ… All tiebreak battles must be resolved

**Implementation:** `app/validators/phase_validators.py::validate_preselection_to_pools()`

**Phase Transition Hooks:**
- âœ… Creates pools from preselection results (top N performers)
- âœ… Distributes performers evenly across pools
- âœ… Generates round-robin pool battles

**Gap:** âš ï¸ No explicit check for ties at qualification boundary BEFORE pool creation (see section 3.1)

---

#### 5.3.3 POOLS â†’ FINALS

**Validation Rules:**
- âœ… All pool battles must be completed
- âœ… Each pool must have exactly one winner
- âœ… Pool count must match groups_ideal
- âœ… Checks for pools without winner

**Implementation:** `app/validators/phase_validators.py::validate_pools_to_finals()`

**Phase Transition Hooks:**
- âœ… Generates finals battles with pool winners

**Status:** âœ… **PRODUCTION READY** (with caveat about tiebreak integration)

---

#### 5.3.4 FINALS â†’ COMPLETED

**Validation Rules:**
- âœ… All finals battles must be completed
- âœ… Finals battle must have a winner (no draws)

**Implementation:** `app/validators/phase_validators.py::validate_finals_to_completed()`

**Status:** âœ… **PRODUCTION READY**

---

### 5.4 Gap Analysis Summary

#### Current State (As-Is):

| Area | Status | Notes |
|------|--------|-------|
| Tournament status lifecycle | âœ… Complete | CREATED â†’ ACTIVE â†’ COMPLETED flow working |
| Category configuration | âœ… Complete | 1v1/2v2, pools, performers_ideal configurable |
| Performer registration | âœ… Complete | One dancer per tournament, duo linking |
| Preselection battle generation | âœ… Complete | Odd/even handling correct |
| Preselection scoring | âœ… Complete | 0-10 scores, 3-way battles supported |
| Pool creation | âœ… Complete | Even distribution, dynamic sizing |
| Pool battles | âœ… Complete | Round-robin generation |
| Finals generation | âœ… Complete | Creates battle with pool winners |
| Phase transition validation | âœ… Complete | All 4 transitions validated |
| Tiebreak detection (preselection) | âœ… Complete | Logic exists and is tested |
| Tiebreak detection (pool winner) | âœ… Complete | Logic exists and is tested |
| **Tiebreak battle creation trigger** | âš ï¸ Gap | Not automatically triggered |
| **Tiebreak resolution integration** | âš ï¸ Gap | May require manual intervention |

#### Desired State (To-Be):

1. **Automatic Tiebreak Triggering:** System should automatically create tiebreak battles when:
   - Preselection ties exist at qualification boundary (before creating pools)
   - Pool winner ties exist (before advancing to finals)

2. **Seamless Phase Advancement:** Phase transitions should be blocked when:
   - Unresolved tiebreaks exist
   - Clear user messaging about what needs resolution

---

## 6. Recommendations

### 6.1 Critical (Before Production)

1. **Verify Tiebreak Integration End-to-End:**
   - Test scenario: 10 performers, pool capacity 8, 3 performers tied at score 7.5 at positions 7, 8, 9
   - Expected: Tiebreak battle created automatically, phase blocks until resolved
   - Current: Unclear if this happens automatically

2. **Verify Pool Winner Tiebreak Integration:**
   - Test scenario: Pool with 4 performers, 2 tied at top with 9 points each
   - Expected: Tiebreak battle created, pool winner set after resolution
   - Current: `check_for_ties()` exists but trigger point unclear

### 6.2 Recommended Improvements

1. **Add Missing Integration Tests:**
   - End-to-end test: Full tournament flow with ties at both boundaries
   - Integration test: Phase transition with tiebreak creation

2. **User Messaging for Ties:**
   - When ties detected, show clear message to staff
   - List which performers are tied and why

3. **Battle Order/Scheduling (Future):**
   - Currently FIFO queue
   - May want category-grouped ordering
   - May want manual reordering

### 6.3 Nice-to-Have (Future)

1. **Tournament Results Summary Page:** Consolidated view of all category champions
2. **Battle Result Correction:** Allow editing completed battles (with audit trail)
3. **MC Projection Views:** Special read-only views for ceremony hosting

---

> **Note:** Detailed acceptance criteria with Gherkin scenarios are in Section 5 (Business Rules & Acceptance Criteria).

---

## 7. Appendix: Reference Material

### 7.1 Open Questions

1. **Q:** Is tiebreak creation triggered automatically during phase transitions, or does staff need to manually create them?
   - **A:** No - this is GAP #1 and #2. Tiebreaks should auto-create when last battle is scored (see Section 5.2, 5.3).

2. **Q:** What happens if staff encodes a 3-way battle incorrectly (e.g., missing a score)?
   - **A:** Validation exists in encoding service, error returned.

3. **Q:** Should duo unregistration cascade to partner?
   - **A:** Currently does NOT cascade (documented as future enhancement).

4. **Q:** When multiple performers share the boundary score, which ones compete in the tiebreak?
   - **A:** ALL performers with the boundary score must compete (BR-TIE-003: Fairness Principle).
   - **Example:** If 5 performers have score 7.5 and only 4 spots are available, ALL 5 compete for 4 spots (winners_needed=4, elimination_rounds=1).
   - **Note:** The code in `tiebreak_service.py:82-85` correctly implements this - it finds ALL performers where `score == cutoff_score`, not just those "below the line".

### 7.2 Next Steps

1. Implement bug fixes (Section 5.1 - pool sizing)
2. Implement integration gaps (Section 5.2, 5.3 - auto tiebreak detection)
3. Implement battle schedule interleaving (Section 5.4)

---

